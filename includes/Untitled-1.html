<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
      crossorigin="anonymous"
    ></script>
    <title>Document</title>

    <style>
      .page > * {
        display: none;
      }

      /* 隱藏選單 */
      .settings-nav .nav-page ul {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <ul class="settings-nav">
        <li class="nav-page" data-page="page-woocommerce">
          <a href="">woocommerce</a>
          <ul class="page-woocommerce-tab">
            <li><a href="" data-tab="woocommerce-tab-general">general</a></li>
            <li>
              <a href="" data-tab="woocommerce-tab-product">product</a>
              <ul>
                <li><a href="">general</a></li>
                <li><a href="">stock</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li class="nav-page" data-page="page-emetor">
          <a href="">emetor</a>
          <ul>
            <li>
              <a href="">general</a>
            </li>
          </ul>
        </li>
      </ul>

      <div class="page page-woocommerce">
        <div class="woocommerce-tab-general">
          <h1>woocommerce-tab-general content</h1>
          <form method="post" action="options.php">
            <!-- settings_fields("myCustomOptionGroup");
                      do_settings_sections("myCustomSubPageSlug")
                      submit_button(); -->
          </form>
        </div>

        <div class="woocommerce-tab-product">
          <div class="woocommerce-tab-product-subtab-general">
            <h1>woocommerce-tab-product-subtab-general content</h1>
            <form method="post" action="options.php">
              <!-- settings_fields("myCustomOptionGroup");
                      do_settings_sections("myCustomSubPageSlug")
                      submit_button(); -->
            </form>
          </div>
          <div class="woocommerce-tab-product-subtab-stock">
            <h1>woocommerce-tab-product-subtab-stock</h1>
            <form method="post" action="options.php">
              <!-- settings_fields("myCustomOptionGroup");
                          do_settings_sections("myCustomSubPageSlug")
                          submit_button(); -->
            </form>
          </div>
        </div>
      </div>

      <div class="page page-emetor">
        <div class="emetor-tab-general">
          <h1>emetor-tab-general</h1>
          <form method="post" action="options.php"></form>
        </div>
      </div>
    </div>
  </body>
</html>

<script>
  $(document).ready(function () {
    // page link
    $(".nav-page > a").click(function (e) {
      e.preventDefault()
      const pageClassName = $(this).parent("li").data("page")
      const nextUl = $(this).siblings("ul")

      // 顯示下一層ul
      $(".settings-nav .nav-page ul").hide()
      nextUl.show()

      renderFirstChildDIV(pageClassName)
    })
  })

  // tab link
  $(".nav-page > a + ul li a").click(function (e) {
    e.preventDefault()
    const tabClassName = $(this).data("tab")
    renderDIV(tabClassName)
    renderFirstChildDIV(tabClassName)
  })

  function renderFirstChildDIV(className) {
    console.log($(`.${className} div:first-child`))
    $(`.${className} div:first-child`).show()
  }

  function renderDIV(className) {
    const element = $(`.${className}`)
    const elementType = $(`.${className}`).prop("type")
    $(`.${className}`).siblings(elementType).hide()
    element.show()
  }
</script>
